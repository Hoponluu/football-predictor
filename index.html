<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dá»± ÄoÃ¡n Tá»‰ Sá»‘ World Cup 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Colors */
            --primary-green: #4ADE80;
            --yellow-bg: #FEF3C7;
            --stroke: #E0E0E0;
            --stroke-hover: #D6D6D6;
            --bg-gray: #F5F5F5;
            --white: #FFFFFF;
            --black: #000000;
            --text-dark: #1F2937;
            --text-light: #6B7280;
            --active-tab-bg: #D1D1D1;
            
            /* Spacing */
            --card-gap-h: 16px;
            --card-gap-v: 24px;
            --section-padding: 24px;
            
            /* Border */
            --border-radius: 12px;
            --tab-radius: 40px;
            
            /* Card Size */
            --card-width: 185px;
            --card-height: 208px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--bg-gray);
            color: var(--text-dark);
            min-height: 100vh;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: var(--section-padding);
            padding: 8px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.05);
        }

        .nav-tab {
            padding: 8px 20px;
            background: transparent;
            border: none;
            border-radius: var(--tab-radius);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .nav-tab:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .nav-tab.active {
            background: var(--active-tab-bg);
        }

        .nav-login {
            margin-left: auto;
            padding: 10px 24px;
            background: var(--primary-green);
            color: var(--white);
            border: none;
            border-radius: var(--border-radius);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-login:hover {
            background: #3BC76C;
        }

        /* Page Content */
        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
        }

        /* Section */
        .section {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: var(--section-padding);
            margin-bottom: var(--card-gap-v);
            box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.05);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--card-gap-v);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .view-all-btn {
            background: none;
            border: none;
            color: var(--primary-green);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .view-all-btn:hover {
            color: #3BC76C;
            text-decoration: underline;
        }

        /* Match Cards Grid */
        .matches-scroll {
            display: flex;
            gap: var(--card-gap-h);
            overflow-x: auto;
            padding-bottom: 12px;
            scrollbar-width: thin;
            scrollbar-color: var(--stroke) transparent;
        }

        .matches-scroll::-webkit-scrollbar {
            height: 6px;
        }

        .matches-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        .matches-scroll::-webkit-scrollbar-thumb {
            background: var(--stroke);
            border-radius: 3px;
        }

        .matches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(var(--card-width), 1fr));
            gap: var(--card-gap-v) var(--card-gap-h);
        }

        /* Match Card */
        .match-card {
            width: var(--card-width);
            min-width: var(--card-width);
            min-height: var(--card-height);
            background: var(--white);
            border: 1px solid var(--stroke);
            border-radius: var(--border-radius);
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.05);
        }

        .match-card:hover:not(.disabled) {
            border-color: var(--stroke-hover);
            box-shadow: 0 6px 14px 0 rgba(0, 0, 0, 0.08);
        }

        .match-card.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* Favorite Team Card */
        .favorite-team-card {
            width: var(--card-width);
            min-width: var(--card-width);
            min-height: var(--card-height);
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 2px solid #F59E0B;
            border-radius: var(--border-radius);
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            box-shadow: 0 6px 16px 0 rgba(245, 158, 11, 0.3);
        }

        .favorite-team-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px 0 rgba(245, 158, 11, 0.4);
        }

        .favorite-team-card.locked {
            cursor: not-allowed;
            opacity: 0.7;
            background: #E5E7EB;
            border-color: #9CA3AF;
            box-shadow: none;
        }

        .favorite-team-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #F59E0B;
            color: var(--white);
            font-size: 10px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 4px;
            text-transform: uppercase;
        }

        .favorite-team-icon {
            font-size: 48px;
            text-align: center;
            margin: 8px 0;
        }

        .favorite-team-title {
            font-size: 14px;
            font-weight: 700;
            text-align: center;
            color: #92400E;
        }

        .favorite-team-subtitle {
            font-size: 11px;
            text-align: center;
            color: #78350F;
            line-height: 1.4;
        }

        .favorite-team-deadline {
            font-size: 10px;
            text-align: center;
            color: #B45309;
            font-weight: 600;
            margin-top: 4px;
        }

        .favorite-team-selected {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }

        .favorite-team-selected-flag {
            font-size: 40px;
        }

        .favorite-team-selected-name {
            font-size: 13px;
            font-weight: 700;
            color: #92400E;
            text-align: center;
        }

        .favorite-team-selected-points {
            font-size: 11px;
            color: #78350F;
            text-align: center;
        }

        /* Stats Favorite Team Section */
        .stats-favorite-team {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border: 2px solid #F59E0B;
            border-radius: var(--border-radius);
            padding: 16px;
            margin-top: 16px;
        }

        .stats-favorite-team-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .stats-favorite-team-icon {
            font-size: 32px;
        }

        .stats-favorite-team-info {
            flex: 1;
        }

        .stats-favorite-team-name {
            font-size: 16px;
            font-weight: 700;
            color: #92400E;
            margin-bottom: 4px;
        }

        .stats-favorite-team-status {
            font-size: 12px;
            color: #78350F;
        }

        .stats-favorite-team-points {
            background: var(--white);
            border-radius: 8px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stats-favorite-team-points-label {
            font-size: 12px;
            color: var(--text-light);
        }

        .stats-favorite-team-points-value {
            font-size: 20px;
            font-weight: 700;
            color: #F59E0B;
        }

        .match-group-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--black);
            color: var(--white);
            font-size: 10px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
        }

        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            flex: 1;
        }

        .team-flag {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .team-name {
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            color: var(--text-dark);
        }

        .match-vs {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-light);
        }

        .match-datetime {
            display: flex;
            justify-content: center;
            gap: 12px;
            font-size: 12px;
            color: var(--text-light);
            margin-top: 4px;
        }

        .match-status {
            text-align: center;
            font-size: 12px;
            font-weight: 500;
            padding: 6px;
            border-radius: 6px;
            margin-top: auto;
        }

        .match-status.not-open {
            color: var(--text-light);
            background: var(--bg-gray);
        }

        .match-status.open {
            color: var(--primary-green);
            background: rgba(74, 222, 128, 0.1);
        }

        .match-status.predicted {
            color: var(--primary-green);
            background: rgba(74, 222, 128, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .match-status.live {
            color: #EF4444;
            background: rgba(239, 68, 68, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        /* Live progress bar */
        .live-progress {
            width: 20px;
            height: 3px;
            background: rgba(239, 68, 68, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .live-progress-bar {
            height: 100%;
            background: #EF4444;
            animation: progress 2s ease-in-out infinite;
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        /* Match Score (káº¿t quáº£ thá»±c táº¿) */
        .match-score {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin: 12px 0;
        }

        .score-number {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .score-minute {
            font-size: 12px;
            color: var(--text-light);
        }

        /* Match Result (dá»± Ä‘oÃ¡n + Ä‘iá»ƒm) */
        .match-result {
            text-align: center;
            font-size: 12px;
            margin-top: auto;
        }

        .prediction-text {
            color: var(--primary-green);
            font-weight: 500;
        }

        .points-text {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-top: 4px;
            flex-wrap: wrap;
        }

        .point-badge {
            background: var(--yellow-bg);
            color: var(--text-dark);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--white);
            border-radius: var(--border-radius);
            padding: 24px;
            max-width: 400px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text-light);
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--bg-gray);
            color: var(--text-dark);
        }

        .modal-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .modal-team-flag {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }

        .modal-team-name {
            font-size: 14px;
            font-weight: 600;
        }

        .modal-vs {
            font-size: 16px;
            font-weight: 500;
            color: var(--text-light);
        }

        /* Prediction Input */
        .prediction-inputs {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 20px;
            margin: 32px 0;
        }

        .prediction-input-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .prediction-input {
            width: 60px;
            height: 50px;
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            border: none;
            border-bottom: 2px dashed var(--stroke);
            background: transparent;
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            transition: all 0.2s ease;
            padding: 8px;
        }

        .prediction-input:focus {
            outline: none;
            border-bottom-color: var(--primary-green);
        }

        .prediction-input:disabled {
            background: var(--bg-gray);
            cursor: not-allowed;
            border-bottom-style: solid;
        }

        .prediction-divider {
            font-size: 20px;
            color: var(--text-light);
            margin: 0 8px;
            padding-bottom: 12px;
        }

        .prediction-minute {
            width: 80px;
            height: 50px;
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            border: none;
            border-bottom: 2px dashed var(--stroke);
            background: transparent;
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
            transition: all 0.2s ease;
            padding: 8px;
        }

        .prediction-minute:focus {
            outline: none;
            border-bottom-color: var(--primary-green);
        }

        .prediction-minute:disabled {
            background: var(--bg-gray);
            cursor: not-allowed;
            border-bottom-style: solid;
        }

        .input-label {
            font-size: 11px;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Validation Warning */
        .validation-warning {
            display: none;
            background: #FEF3C7;
            border: 1px solid #F59E0B;
            color: #92400E;
            padding: 12px;
            border-radius: var(--border-radius);
            font-size: 13px;
            margin-top: 16px;
            text-align: center;
        }

        .validation-warning.show {
            display: block;
            animation: shake 0.3s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Login Modal */
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-input {
            padding: 12px;
            border: 1px solid var(--stroke);
            border-radius: var(--border-radius);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            color: var(--text-dark);
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1);
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-wrapper label {
            font-size: 13px;
            color: var(--text-dark);
            cursor: pointer;
        }

        /* Results Detail Modal */
        .results-modal .modal {
            max-width: 450px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .results-score-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 16px 0;
        }

        .results-score-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .results-team-flag {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .results-team-name {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .results-final-score {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .score-main {
            font-size: 36px;
            font-weight: 700;
            color: var(--text-dark);
        }

        .score-detail {
            font-size: 14px;
            color: var(--text-light);
        }

        .results-list-wrapper {
            max-height: 400px;
            overflow-y: auto;
            margin: 16px 0;
            border-radius: var(--border-radius);
            border: 1px solid var(--stroke);
        }

        .results-list-wrapper::-webkit-scrollbar {
            width: 6px;
        }

        .results-list-wrapper::-webkit-scrollbar-track {
            background: var(--bg-gray);
        }

        .results-list-wrapper::-webkit-scrollbar-thumb {
            background: var(--stroke);
            border-radius: 3px;
        }

        .results-list-wrapper::-webkit-scrollbar-thumb:hover {
            background: var(--stroke-hover);
        }

        .result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-bottom: 1px solid var(--stroke);
            transition: background 0.2s ease;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-item.current-user {
            background: var(--yellow-bg);
        }

        .result-rank {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            flex-shrink: 0;
        }

        .result-rank.rank-1 { background: #FFD700; color: var(--black); }
        .result-rank.rank-2 { background: #C0C0C0; color: var(--black); }
        .result-rank.rank-3 { background: #CD7F32; color: var(--white); }
        .result-rank.rank-4 { background: #6B7280; color: var(--white); }
        .result-rank.rank-other { background: var(--bg-gray); color: var(--text-dark); }

        .result-player {
            flex: 1;
            min-width: 0;
        }

        .result-player-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .result-prediction {
            font-size: 13px;
            color: var(--primary-green);
            font-weight: 500;
        }

        .result-points {
            display: flex;
            align-items: center;
            gap: 4px;
            flex-shrink: 0;
        }

        .point-icon {
            display: inline-flex;
            align-items: center;
            gap: 2px;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 6px;
            border-radius: 4px;
            background: var(--bg-gray);
        }

        .point-icon.rank-point {
            background: rgba(74, 222, 128, 0.15);
            color: var(--primary-green);
        }

        .point-icon.exact-score {
            background: rgba(239, 68, 68, 0.15);
            color: #EF4444;
        }

        .point-icon.minute-point {
            background: rgba(59, 130, 246, 0.15);
            color: #3B82F6;
        }

        .point-icon.zero {
            background: var(--bg-gray);
            color: var(--text-light);
        }

        /* Modal Actions */
        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: var(--border-radius);
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--primary-green);
            color: var(--white);
        }

        .btn-primary:hover:not(:disabled) {
            background: #3BC76C;
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--white);
            color: var(--text-dark);
            border: 2px solid var(--stroke);
        }

        .btn-secondary:hover {
            background: var(--bg-gray);
        }

        /* Success Animation */
        .success-checkmark {
            display: none;
            width: 60px;
            height: 60px;
            margin: 20px auto;
        }

        .success-checkmark.show {
            display: block;
            animation: scaleIn 0.3s ease;
        }

        @keyframes scaleIn {
            0% {
                transform: scale(0);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        .checkmark-circle {
            stroke-dasharray: 166;
            stroke-dashoffset: 166;
            stroke-width: 2;
            stroke: var(--primary-green);
            fill: none;
            animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        .checkmark-check {
            transform-origin: 50% 50%;
            stroke-dasharray: 48;
            stroke-dashoffset: 48;
            stroke: var(--primary-green);
            animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.4s forwards;
        }

        @keyframes stroke {
            100% {
                stroke-dashoffset: 0;
            }
        }

        /* Leaderboard Table */
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-table thead {
            background: var(--primary-green);
        }

        .leaderboard-table th {
            padding: 12px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--white);
        }

        .leaderboard-table th:first-child {
            border-radius: var(--border-radius) 0 0 0;
        }

        .leaderboard-table th:last-child {
            border-radius: 0 var(--border-radius) 0 0;
        }

        .leaderboard-table td {
            padding: 12px;
            font-size: 14px;
            border-bottom: 1px solid var(--stroke);
        }

        .leaderboard-table tbody tr:nth-child(odd) {
            background: var(--yellow-bg);
        }

        .leaderboard-table tbody tr:hover {
            background: rgba(74, 222, 128, 0.1);
        }

        .rank-badge {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .rank-1 { background: #FFD700; color: var(--black); }
        .rank-2 { background: #C0C0C0; color: var(--black); }
        .rank-3 { background: #CD7F32; color: var(--white); }
        .rank-4 { background: #6B7280; color: var(--white); }
        .rank-other { background: var(--primary-green); color: var(--white); }

        .player-name {
            color: #2563EB;
            font-weight: 600;
            cursor: pointer;
        }

        .player-name:hover {
            text-decoration: underline;
        }

        /* Stats Cards */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--card-gap-h);
            margin-bottom: var(--card-gap-v);
        }

        .stat-card {
            background: var(--white);
            border: 1px solid var(--stroke);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px 0 rgba(0, 0, 0, 0.05);
        }

        .stat-number {
            font-size: 48px;
            font-weight: 700;
            color: var(--text-dark);
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .matches-grid {
                grid-template-columns: repeat(auto-fill, minmax(calc(var(--card-width) * 0.9), 1fr));
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }

            .nav-tabs {
                overflow-x: auto;
                scrollbar-width: none;
            }

            .nav-tabs::-webkit-scrollbar {
                display: none;
            }

            .matches-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }

            .homepage-grid {
                grid-template-columns: 1fr !important;
            }

            --card-width: 160px;
        }
    </style>
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="supabase-client.js"></script>
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="switchPage('homepage')" style="padding: 8px 12px;">ğŸ </button>
            <button class="nav-tab" onclick="switchPage('schedule')">ğŸ“… Lá»‹ch thi Ä‘áº¥u</button>
            <button class="nav-tab" onclick="switchPage('leaderboard')">ğŸ† Báº£ng xáº¿p háº¡ng</button>
            <button class="nav-login" onclick="openLoginModal()">ÄÄƒng nháº­p</button>
        </nav>

        <!-- Homepage -->
        <div id="homepage" class="page-content active">
            <!-- Tráº­n Ä‘áº¥u sáº¯p diá»…n ra -->
            <section class="section">
                <div class="section-header">
                    <h2 class="section-title">ğŸŸï¸ TRáº¬N Äáº¤U Sáº®P DIá»„N RA</h2>
                    <button class="view-all-btn" onclick="switchPage('schedule')">XEM Táº¤T Cáº¢</button>
                </div>
                <div class="matches-scroll" id="upcomingMatches">
                    <!-- Sáº½ Ä‘Æ°á»£c táº¡o báº±ng JavaScript -->
                </div>
            </section>

            <div class="homepage-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                <!-- Báº£ng xáº¿p háº¡ng -->
                <section class="section">
                    <div class="section-header">
                        <h2 class="section-title">ğŸ† Báº¢NG Xáº¾P Háº NG</h2>
                    </div>
                    <div id="leaderboardPreview">
                        <!-- Sáº½ Ä‘Æ°á»£c táº¡o báº±ng JavaScript -->
                    </div>
                </section>

                <!-- ThÃ nh tÃ­ch cÃ¡ nhÃ¢n -->
                <section class="section">
                    <div class="section-header">
                        <h2 class="section-title">ğŸ‘¤ THÃ€NH TÃCH CÃ NHÃ‚N</h2>
                    </div>
                    <div class="stats-row">
                        <div class="stat-card">
                            <div class="stat-number">2</div>
                            <div class="stat-label">ğŸ† Vá»Š TRÃ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">120</div>
                            <div class="stat-label">ğŸ“Š ÄIá»‚M</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">4</div>
                            <div class="stat-label">ğŸ¯ Tá»ˆ Sá»</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">4</div>
                            <div class="stat-label">ğŸ¥‡ NHáº¤T</div>
                        </div>
                    </div>
                    
                    <!-- Favorite Team Stats -->
                    <div id="statsFavoriteTeam"></div>
                    
                    <!-- Chart vÃ  lá»‹ch sá»­ sáº½ thÃªm sau -->
                </section>
            </div>

            <!-- Lá»‹ch sá»­ -->
            <section class="section">
                <div class="section-header">
                    <h2 class="section-title">ğŸ“Š Lá»ŠCH Sá»¬</h2>
                    <button class="view-all-btn" onclick="scrollToPersonalStats()">XEM Táº¤T Cáº¢</button>
                </div>
                <div class="matches-scroll" id="historyMatches">
                    <!-- Sáº½ Ä‘Æ°á»£c táº¡o báº±ng JavaScript -->
                </div>
            </section>
        </div>

        <!-- Lá»‹ch thi Ä‘áº¥u Page -->
        <div id="schedule" class="page-content">
            <section class="section">
                <div class="section-header">
                    <h2 class="section-title">ğŸŸï¸ TRáº¬N Äáº¤U Sáº®P DIá»„N RA VÃ’NG NÃ€Y</h2>
                </div>
                <div class="matches-grid" id="scheduleMatches">
                    <!-- Sáº½ Ä‘Æ°á»£c táº¡o báº±ng JavaScript -->
                </div>
            </section>

            <!-- Stats summary -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-number">16</div>
                    <div class="stat-label">TRáº¬N</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">92</div>
                    <div class="stat-label">CÃ’N Láº I</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">140</div>
                    <div class="stat-label">âš½ BÃ€N THáº®NG</div>
                </div>
            </div>
        </div>

        <!-- Báº£ng xáº¿p háº¡ng Page -->
        <div id="leaderboard" class="page-content">
            <section class="section">
                <div class="section-header">
                    <h2 class="section-title">ğŸ† Báº¢NG Xáº¾P Háº NG</h2>
                </div>
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th>Háº¡ng</th>
                            <th>NgÆ°á»i chÆ¡i</th>
                            <th>Äiá»ƒm</th>
                            <th>Top 1</th>
                            <th>ÄÃºng tá»‰ sá»‘</th>
                            <th>ÄÃºng sá»‘ phÃºt</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardTable">
                        <!-- Sáº½ Ä‘Æ°á»£c táº¡o báº±ng JavaScript -->
                    </tbody>
                </table>
            </section>

            <div id="personalStatsSection">
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-number">2</div>
                        <div class="stat-label">ğŸ† Vá»Š TRÃ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">120</div>
                        <div class="stat-label">ğŸ“Š ÄIá»‚M</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4</div>
                        <div class="stat-label">ğŸ¯ Tá»ˆ Sá»</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">4</div>
                        <div class="stat-label">ğŸ¥‡ NHáº¤T</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="predictionModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Dá»± Ä‘oÃ¡n tá»‰ sá»‘</h3>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>

            <div class="modal-teams">
                <div class="modal-team">
                    <div class="modal-team-flag" id="modalHomeFlag"></div>
                    <div class="modal-team-name" id="modalHomeName"></div>
                </div>
                <div class="modal-vs">vs</div>
                <div class="modal-team">
                    <div class="modal-team-flag" id="modalAwayFlag"></div>
                    <div class="modal-team-name" id="modalAwayName"></div>
                </div>
            </div>

            <div class="prediction-inputs">
                <div class="prediction-input-wrapper">
                    <input type="number" class="prediction-input" id="inputHomeScore" min="0" max="20" value="2">
                    <span class="input-label">NhÃ </span>
                </div>
                <div class="prediction-input-wrapper">
                    <input type="number" class="prediction-minute" id="inputMinute" min="0" max="90" value="45">
                    <span class="input-label">PhÃºt</span>
                </div>
                <div class="prediction-input-wrapper">
                    <input type="number" class="prediction-input" id="inputAwayScore" min="0" max="20" value="0">
                    <span class="input-label">KhÃ¡ch</span>
                </div>
            </div>

            <div class="validation-warning" id="validationWarning">
                âš ï¸ Tá»‰ sá»‘ 0-0 thÃ¬ sá»‘ phÃºt pháº£i lÃ  0
            </div>

            <svg class="success-checkmark" id="successCheckmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
            </svg>

            <div class="modal-actions" id="modalActions">
                <button class="btn btn-primary" id="btnConfirm" onclick="confirmPrediction()">XÃ¡c nháº­n</button>
                <button class="btn btn-secondary" id="btnEdit" onclick="editPrediction()" style="display: none;">Chá»‰nh sá»­a</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">ÄÄƒng nháº­p</h3>
                <button class="modal-close" onclick="closeLoginModal()">Ã—</button>
            </div>

            <form class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">TÃªn cá»§a báº¡n</label>
                    <input type="text" class="form-input" id="loginName" placeholder="Nháº­p tÃªn cá»§a báº¡n" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Máº­t kháº©u</label>
                    <input type="password" class="form-input" id="loginPassword" placeholder="Nháº­p máº­t kháº©u" required>
                </div>

                <div class="form-group">
                    <label class="form-label">MÃ£ nhÃ³m</label>
                    <input type="text" class="form-input" id="loginGroupCode" placeholder="Nháº­p mÃ£ nhÃ³m" required>
                </div>

                <div class="checkbox-wrapper">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe">Ghi nhá»› Ä‘Äƒng nháº­p</label>
                </div>

                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">ÄÄƒng nháº­p</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Results Detail Modal -->
    <div class="modal-overlay results-modal" id="resultsModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Dá»± Ä‘oÃ¡n tá»‰ sá»‘</h3>
                <button class="modal-close" onclick="closeResultsModal()">Ã—</button>
            </div>

            <div class="results-header">
                <div class="results-score-display">
                    <div class="results-score-team">
                        <div class="results-team-flag" id="resultsHomeFlag"></div>
                        <div class="results-team-name" id="resultsHomeName"></div>
                    </div>
                    <div class="results-final-score">
                        <div class="score-main" id="resultsHomeScore">2</div>
                    </div>
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 0 16px;">
                        <div style="font-size: 18px; color: var(--text-light); font-weight: 500;">vs</div>
                        <div class="score-detail" id="resultsMinute">82'</div>
                    </div>
                    <div class="results-final-score">
                        <div class="score-main" id="resultsAwayScore">0</div>
                    </div>
                    <div class="results-score-team">
                        <div class="results-team-flag" id="resultsAwayFlag"></div>
                        <div class="results-team-name" id="resultsAwayName"></div>
                    </div>
                </div>
            </div>

            <div class="results-list-wrapper">
                <div id="resultsList">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Favorite Team Modal -->
    <div class="modal-overlay" id="favoriteTeamModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">â­ Chá»n Äá»™i YÃªu ThÃ­ch</h3>
                <button class="modal-close" onclick="closeFavoriteTeamModal()">Ã—</button>
            </div>

            <div style="padding: 16px; background: var(--yellow-bg); border-radius: 8px; margin-bottom: 20px;">
                <div style="font-size: 13px; color: #78350F; line-height: 1.5;">
                    <strong>CÃ¡ch hoáº¡t Ä‘á»™ng:</strong><br>
                    Chá»n 1 Ä‘á»™i. Äá»™i Ä‘Ã³ Ä‘i cÃ ng sÃ¢u â†’ Äiá»ƒm bonus cÃ ng cao!<br>
                    Báº¡n cÃ³ thá»ƒ Ä‘á»•i Ä‘á»™i cho Ä‘áº¿n <strong id="favoriteDeadlineText"></strong>
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 20px;">
                <label class="form-label">TÃ¬m kiáº¿m Ä‘á»™i</label>
                <input 
                    type="text" 
                    class="form-input" 
                    id="favoriteTeamSearch" 
                    placeholder="GÃµ tÃªn Ä‘á»™i... (VD: Argentina, Brasil)"
                    style="width: 100%;"
                >
            </div>

            <div id="favoriteTeamList" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                <!-- Will be populated by JavaScript -->
            </div>

            <div id="favoriteTeamSelected" style="display: none; padding: 16px; background: var(--bg-gray); border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="font-size: 40px;" id="selectedTeamFlag"></div>
                    <div style="flex: 1;">
                        <div style="font-size: 16px; font-weight: 700; color: var(--text-dark); margin-bottom: 4px;" id="selectedTeamName"></div>
                        <div style="font-size: 12px; color: var(--text-light);" id="selectedTeamPoints"></div>
                    </div>
                </div>
            </div>

            <svg class="success-checkmark" id="favoriteSuccessCheckmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
            </svg>

            <div class="modal-actions" id="favoriteTeamActions">
                <button class="btn btn-secondary" onclick="closeFavoriteTeamModal()">Há»§y</button>
                <button class="btn btn-primary" id="btnConfirmFavorite" onclick="confirmFavoriteTeam()" disabled>XÃ¡c nháº­n</button>
            </div>
        </div>
    </div>

    <script>
        // Data
        const countries = {
            // WC 2026 Hosts
            'Canada': { flag: 'ğŸ‡¨ğŸ‡¦', color: '#FEE2E2' },
            'Mexico': { flag: 'ğŸ‡²ğŸ‡½', color: '#D1FAE5' },
            'United States': { flag: 'ğŸ‡ºğŸ‡¸', color: '#DBEAFE' },
            
            // Europe - Qualified
            'Austria': { flag: 'ğŸ‡¦ğŸ‡¹', color: '#FEE2E2' },
            'Belgium': { flag: 'ğŸ‡§ğŸ‡ª', color: '#FEF3C7' },
            'Croatia': { flag: 'ğŸ‡­ğŸ‡·', color: '#FEE2E2' },
            'England': { flag: 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿', color: '#E0E0E0' },
            'France': { flag: 'ğŸ‡«ğŸ‡·', color: '#DBEAFE' },
            'Germany': { flag: 'ğŸ‡©ğŸ‡ª', color: '#FEF3C7' },
            'Netherlands': { flag: 'ğŸ‡³ğŸ‡±', color: '#FEE2E2' },
            'Norway': { flag: 'ğŸ‡³ğŸ‡´', color: '#FEE2E2' },
            'Portugal': { flag: 'ğŸ‡µğŸ‡¹', color: '#D1FAE5' },
            'Scotland': { flag: 'ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿', color: '#DBEAFE' },
            'Spain': { flag: 'ğŸ‡ªğŸ‡¸', color: '#FEF3C7' },
            'Switzerland': { flag: 'ğŸ‡¨ğŸ‡­', color: '#FEE2E2' },
            
            // Europe - Playoffs
            'Italy': { flag: 'ğŸ‡®ğŸ‡¹', color: '#D1FAE5' },
            'Poland': { flag: 'ğŸ‡µğŸ‡±', color: '#FEE2E2' },
            'Ukraine': { flag: 'ğŸ‡ºğŸ‡¦', color: '#FEF3C7' },
            'Sweden': { flag: 'ğŸ‡¸ğŸ‡ª', color: '#DBEAFE' },
            'Albania': { flag: 'ğŸ‡¦ğŸ‡±', color: '#FEE2E2' },
            'Wales': { flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', color: '#D1FAE5' },
            'Turkey': { flag: 'ğŸ‡¹ğŸ‡·', color: '#FEE2E2' },
            'Romania': { flag: 'ğŸ‡·ğŸ‡´', color: '#DBEAFE' },
            
            // Asia - Qualified
            'Australia': { flag: 'ğŸ‡¦ğŸ‡º', color: '#DBEAFE' },
            'Iran': { flag: 'ğŸ‡®ğŸ‡·', color: '#D1FAE5' },
            'Japan': { flag: 'ğŸ‡¯ğŸ‡µ', color: '#FEE2E2' },
            'Jordan': { flag: 'ğŸ‡¯ğŸ‡´', color: '#FEE2E2' },
            'Qatar': { flag: 'ğŸ‡¶ğŸ‡¦', color: '#FEE2E2' },
            'Saudi Arabia': { flag: 'ğŸ‡¸ğŸ‡¦', color: '#D1FAE5' },
            'South Korea': { flag: 'ğŸ‡°ğŸ‡·', color: '#FEE2E2' },
            'Uzbekistan': { flag: 'ğŸ‡ºğŸ‡¿', color: '#DBEAFE' },
            
            // Africa - Qualified
            'Cape Verde': { flag: 'ğŸ‡¨ğŸ‡»', color: '#DBEAFE' },
            'Morocco': { flag: 'ğŸ‡²ğŸ‡¦', color: '#FEE2E2' },
            'Nigeria': { flag: 'ğŸ‡³ğŸ‡¬', color: '#D1FAE5' },
            'Senegal': { flag: 'ğŸ‡¸ğŸ‡³', color: '#D1FAE5' },
            'Tunisia': { flag: 'ğŸ‡¹ğŸ‡³', color: '#FEE2E2' },
            'Egypt': { flag: 'ğŸ‡ªğŸ‡¬', color: '#FEE2E2' },
            'Ghana': { flag: 'ğŸ‡¬ğŸ‡­', color: '#FEF3C7' },
            'Cameroon': { flag: 'ğŸ‡¨ğŸ‡²', color: '#FEF3C7' },
            'Ivory Coast': { flag: 'ğŸ‡¨ğŸ‡®', color: '#FEF3C7' },
            
            // CONCACAF
            'CuraÃ§ao': { flag: 'ğŸ‡¨ğŸ‡¼', color: '#DBEAFE' },
            'Haiti': { flag: 'ğŸ‡­ğŸ‡¹', color: '#FEE2E2' },
            'Panama': { flag: 'ğŸ‡µğŸ‡¦', color: '#FEE2E2' },
            
            // Oceania
            'New Zealand': { flag: 'ğŸ‡³ğŸ‡¿', color: '#DBEAFE' },
            
            // South America
            'Argentina': { flag: 'ğŸ‡¦ğŸ‡·', color: '#DBEAFE' },
            'Brasil': { flag: 'ğŸ‡§ğŸ‡·', color: '#D1FAE5' },
            'Uruguay': { flag: 'ğŸ‡ºğŸ‡¾', color: '#DBEAFE' },
            'Colombia': { flag: 'ğŸ‡¨ğŸ‡´', color: '#FEF3C7' },
            'Chile': { flag: 'ğŸ‡¨ğŸ‡±', color: '#FEE2E2' },
            'Ecuador': { flag: 'ğŸ‡ªğŸ‡¨', color: '#FEF3C7' },
            'Peru': { flag: 'ğŸ‡µğŸ‡ª', color: '#FEE2E2' },
            'Venezuela': { flag: 'ğŸ‡»ğŸ‡ª', color: '#FEF3C7' },
            
            // Popular others
            'Vietnam': { flag: 'ğŸ‡»ğŸ‡³', color: '#FEE2E2' },
            'Thailand': { flag: 'ğŸ‡¹ğŸ‡­', color: '#FEE2E2' },
            'Indonesia': { flag: 'ğŸ‡®ğŸ‡©', color: '#FEE2E2' },
            'Malaysia': { flag: 'ğŸ‡²ğŸ‡¾', color: '#FEE2E2' },
            'China': { flag: 'ğŸ‡¨ğŸ‡³', color: '#FEE2E2' },
            'India': { flag: 'ğŸ‡®ğŸ‡³', color: '#FEF3C7' },
            'Denmark': { flag: 'ğŸ‡©ğŸ‡°', color: '#FEE2E2' },
            'Greece': { flag: 'ğŸ‡¬ğŸ‡·', color: '#DBEAFE' },
            'Czech Republic': { flag: 'ğŸ‡¨ğŸ‡¿', color: '#FEE2E2' },
            'Hungary': { flag: 'ğŸ‡­ğŸ‡º', color: '#D1FAE5' },
            'Serbia': { flag: 'ğŸ‡·ğŸ‡¸', color: '#FEE2E2' },
            'Iceland': { flag: 'ğŸ‡®ğŸ‡¸', color: '#DBEAFE' },
            'Ireland': { flag: 'ğŸ‡®ğŸ‡ª', color: '#D1FAE5' },
            'Russia': { flag: 'ğŸ‡·ğŸ‡º', color: '#DBEAFE' },
            'South Africa': { flag: 'ğŸ‡¿ğŸ‡¦', color: '#FEF3C7' }
        };

        let matches = [
            {
                id: 1,
                group: 'GROUP C',
                home: 'Vietnam',
                away: 'Brasil',
                date: new Date(new Date().setHours(20, 0, 0, 0)),
                status: 'open',
                userPrediction: null,
                actualScore: null
            },
            {
                id: 2,
                group: 'GROUP D',
                home: 'Canada',
                away: 'France',
                date: new Date(new Date().getTime() + 24 * 60 * 60 * 1000),
                status: 'not-open',
                userPrediction: null,
                actualScore: null
            },
            {
                id: 3,
                group: 'GROUP E',
                home: 'Germany',
                away: 'Albania',
                date: new Date(new Date().getTime() + 2 * 24 * 60 * 60 * 1000),
                status: 'not-open',
                userPrediction: null,
                actualScore: null
            },
            {
                id: 4,
                group: 'GROUP F',
                home: 'Belgium',
                away: 'Italy',
                date: new Date(new Date().getTime() - 2 * 60 * 60 * 1000),
                status: 'finished',
                userPrediction: { homeScore: 2, awayScore: 0, minute: 84 },
                actualScore: { homeScore: 2, awayScore: 0, minute: 82 },
                points: { rank: 4, exactScore: 5, minute: 3 }
            },
            {
                id: 5,
                group: 'GROUP G',
                home: 'Sweden',
                away: 'Netherlands',
                date: new Date(new Date().getTime() - 48 * 60 * 60 * 1000),
                status: 'finished',
                userPrediction: null,
                actualScore: { homeScore: 2, awayScore: 3, minute: 92 }
            }
        ];

        let selectedMatch = null;
        let isEditMode = false;

        // Favorite Team Feature
        let favoriteTeamSettings = {
            isEnabled: true, // Admin báº­t/táº¯t
            isLocked: false, // false = Ä‘Ã£ má»Ÿ khÃ³a, true = cÃ²n khÃ³a
            deadline: new Date('2026-06-21T00:00:00'), // Deadline chá»n Ä‘á»™i
            selectedTeam: 'Argentina', // Äá»™i user Ä‘Ã£ chá»n (DEMO)
            teamStatus: 'quarter', // 'active', 'round16', 'quarter', 'semi', 'final', 'champion', 'eliminated'
            points: {
                round16: 5,
                quarter: 10,
                semi: 15,
                final: 25,
                champion: 40
            }
        };

        // Render functions
        function renderMatchCard(match) {
            const card = document.createElement('div');
            card.className = 'match-card';
            
            if (match.status === 'not-open') {
                card.classList.add('disabled');
            }

            // Check if teams exist in countries database
            if (!countries[match.home]) {
                console.error(`Team "${match.home}" not found in countries database`);
                return card; // Return empty card
            }
            if (!countries[match.away]) {
                console.error(`Team "${match.away}" not found in countries database`);
                return card; // Return empty card
            }

            const homeData = countries[match.home];
            const awayData = countries[match.away];

            // Group badge
            card.innerHTML = `<div class="match-group-badge">${match.group}</div>`;

            // Teams
            const teams = document.createElement('div');
            teams.className = 'match-teams';
            teams.innerHTML = `
                <div class="team">
                    <div class="team-flag" style="background: ${homeData.color}">${homeData.flag}</div>
                    <div class="team-name">${match.home}</div>
                </div>
                <div class="match-vs">vs</div>
                <div class="team">
                    <div class="team-flag" style="background: ${awayData.color}">${awayData.flag}</div>
                    <div class="team-name">${match.away}</div>
                </div>
            `;
            card.appendChild(teams);

            // Datetime
            const datetime = document.createElement('div');
            datetime.className = 'match-datetime';
            datetime.innerHTML = `
                <span>ğŸ“… ${match.date.toLocaleDateString('vi-VN', { day: '2-digit', month: 'short' })}</span>
                <span>ğŸ• ${match.date.toLocaleTimeString('vi-VN', { hour: '2-digit', minute: '2-digit' })}</span>
            `;
            card.appendChild(datetime);

            // Status/Score/Result
            if (match.status === 'finished' && match.actualScore) {
                // Show actual score
                const score = document.createElement('div');
                score.className = 'match-score';
                score.innerHTML = `
                    <span class="score-number">${match.actualScore.homeScore}</span>
                    <span class="score-minute">${match.actualScore.minute}'</span>
                    <span class="score-number">${match.actualScore.awayScore}</span>
                `;
                card.appendChild(score);

                // Show prediction result
                const result = document.createElement('div');
                result.className = 'match-result';
                if (match.userPrediction) {
                    const totalPoints = (match.points?.rank || 0) + (match.points?.exactScore || 0) + (match.points?.minute || 0);
                    result.innerHTML = `
                        <div class="prediction-text">âœ“ ${match.userPrediction.homeScore}-${match.userPrediction.awayScore} | ${match.userPrediction.minute}'</div>
                        <div class="points-text">
                            ${match.points?.rank ? `<span class="point-badge">+${match.points.rank}</span>` : ''}
                            ${match.points?.exactScore ? `<span class="point-badge">+${match.points.exactScore}</span>` : ''}
                            ${match.points?.minute ? `<span class="point-badge">+${match.points.minute}</span>` : ''}
                        </div>
                    `;
                } else {
                    result.innerHTML = `
                        <div style="color: var(--text-light);">KhÃ´ng dá»± Ä‘oÃ¡n</div>
                        <div class="points-text"><span class="point-badge">+0</span></div>
                    `;
                }
                card.appendChild(result);
            } else {
                // Show status
                const status = document.createElement('div');
                const now = new Date();
                const matchStarted = now > match.date;

                if (match.status === 'not-open') {
                    status.className = 'match-status not-open';
                    status.textContent = 'ChÆ°a má»Ÿ dá»± Ä‘oÃ¡n';
                } else if (match.status === 'open' && !match.userPrediction) {
                    status.className = 'match-status open';
                    status.innerHTML = 'âœ“ ÄÃ£ má»Ÿ dá»± Ä‘oÃ¡n';
                } else if (match.userPrediction && !matchStarted) {
                    status.className = 'match-status predicted';
                    status.innerHTML = `âœ“ ${match.userPrediction.homeScore}-${match.userPrediction.awayScore} | ${match.userPrediction.minute}'`;
                } else if (match.userPrediction && matchStarted) {
                    status.className = 'match-status live';
                    status.innerHTML = `
                        <span>âœ“ ${match.userPrediction.homeScore}-${match.userPrediction.awayScore} | ${match.userPrediction.minute}'</span>
                        <div class="live-progress"><div class="live-progress-bar"></div></div>
                    `;
                }
                card.appendChild(status);
            }

            // Click handler
            if (match.status === 'finished' && match.actualScore) {
                card.onclick = () => openResultsModal(match);
            } else if (match.status === 'open' || (match.userPrediction && match.status !== 'finished')) {
                card.onclick = () => openModal(match);
            }

            return card;
        }

        function renderFavoriteTeamCard() {
            if (!favoriteTeamSettings.isEnabled) return null;
            
            const card = document.createElement('div');
            const now = new Date();
            const isLocked = favoriteTeamSettings.isLocked || now > favoriteTeamSettings.deadline;
            
            card.className = isLocked ? 'favorite-team-card locked' : 'favorite-team-card';
            
            // Badge
            const badge = document.createElement('div');
            badge.className = 'favorite-team-badge';
            badge.textContent = isLocked ? 'ğŸ”’ KHÃ“A' : 'â­ Má»šI';
            card.appendChild(badge);
            
            if (!favoriteTeamSettings.selectedTeam) {
                // ChÆ°a chá»n Ä‘á»™i
                card.innerHTML += `
                    <div class="favorite-team-icon">â­</div>
                    <div class="favorite-team-title">Chá»n Äá»™i YÃªu ThÃ­ch</div>
                    <div class="favorite-team-subtitle">
                        ${isLocked ? 'ÄÃ£ háº¿t háº¡n chá»n' : 'Nháº­n Ä‘iá»ƒm bonus theo thÃ nh tÃ­ch Ä‘á»™i!'}
                    </div>
                `;
                
                if (!isLocked) {
                    const deadline = favoriteTeamSettings.deadline;
                    card.innerHTML += `
                        <div class="favorite-team-deadline">
                            â° Háº¡n: ${deadline.toLocaleDateString('vi-VN', { day: '2-digit', month: '2-digit', hour: '2-digit', minute: '2-digit' })}
                        </div>
                    `;
                }
            } else {
                // ÄÃ£ chá»n Ä‘á»™i
                const teamData = countries[favoriteTeamSettings.selectedTeam];
                const selected = document.createElement('div');
                selected.className = 'favorite-team-selected';
                selected.innerHTML = `
                    <div class="favorite-team-selected-flag">${teamData.flag}</div>
                    <div class="favorite-team-selected-name">${favoriteTeamSettings.selectedTeam}</div>
                `;
                
                // Hiá»ƒn thá»‹ Ä‘iá»ƒm
                let pointsText = '';
                if (favoriteTeamSettings.teamStatus === 'eliminated') {
                    // ÄÃ£ bá»‹ loáº¡i - hiá»‡n Ä‘iá»ƒm chÃ­nh xÃ¡c
                    const points = getTeamPoints(favoriteTeamSettings.teamStatus);
                    pointsText = `ÄÃ£ nháº­n: ${points} Ä‘iá»ƒm`;
                } else if (favoriteTeamSettings.teamStatus === 'champion') {
                    // ÄÃ£ vÃ´ Ä‘á»‹ch
                    const points = favoriteTeamSettings.points.champion;
                    pointsText = `ğŸ† VÃ´ Ä‘á»‹ch: ${points} Ä‘iá»ƒm!`;
                } else if (favoriteTeamSettings.teamStatus) {
                    // CÃ²n thi Ä‘áº¥u - hiá»‡n Ä‘iá»ƒm tá»‘i thiá»ƒu
                    const points = getTeamPoints(favoriteTeamSettings.teamStatus);
                    pointsText = `Tá»‘i thiá»ƒu: ${points} Ä‘iá»ƒm`;
                } else {
                    pointsText = `Äiá»ƒm max: ${favoriteTeamSettings.points.champion}`;
                }
                
                selected.innerHTML += `<div class="favorite-team-selected-points">${pointsText}</div>`;
                card.appendChild(selected);
            }
            
            // Click handler
            if (!isLocked) {
                card.onclick = () => openFavoriteTeamModal();
            }
            
            return card;
        }

        function getTeamPoints(status) {
            const pointsMap = {
                'round16': favoriteTeamSettings.points.round16,
                'quarter': favoriteTeamSettings.points.quarter,
                'semi': favoriteTeamSettings.points.semi,
                'final': favoriteTeamSettings.points.final,
                'champion': favoriteTeamSettings.points.champion
            };
            return pointsMap[status] || 0;
        }

        function renderUpcomingMatches() {
            const container = document.getElementById('upcomingMatches');
            container.innerHTML = '';
            
            // ThÃªm favorite team card á»Ÿ Ä‘áº§u (trang chá»§)
            const favoriteCard = renderFavoriteTeamCard();
            if (favoriteCard) {
                container.appendChild(favoriteCard);
            }
            
            const upcoming = matches.filter(m => m.status !== 'finished').slice(0, 5);
            upcoming.forEach(match => {
                container.appendChild(renderMatchCard(match));
            });
        }

        function renderScheduleMatches() {
            const container = document.getElementById('scheduleMatches');
            container.innerHTML = '';
            
            // KHÃ”NG thÃªm favorite team card á»Ÿ Ä‘Ã¢y ná»¯a
            
            matches.forEach(match => {
                container.appendChild(renderMatchCard(match));
            });
        }

        function renderHistoryMatches() {
            const container = document.getElementById('historyMatches');
            container.innerHTML = '';
            
            const history = matches.filter(m => m.status === 'finished').slice(0, 5);
            history.forEach(match => {
                container.appendChild(renderMatchCard(match));
            });
        }

        function renderLeaderboard() {
            const tbody = document.getElementById('leaderboardTable');
            const preview = document.getElementById('leaderboardPreview');
            
            const players = [
                { rank: 1, name: 'Na Bito', points: 12, top1: 4, exactScore: 0, exactMinute: 2 },
                { rank: 2, name: 'Tuá»‡', points: 8, top1: 1, exactScore: 0, exactMinute: 3 },
                { rank: 3, name: 'Vy', points: 6, top1: 0, exactScore: 0, exactMinute: 2 },
                { rank: 4, name: 'Lan', points: 9, top1: 4, exactScore: 1, exactMinute: 0 },
                { rank: 5, name: 'Háº£i', points: 7, top1: 2, exactScore: 0, exactMinute: 2 }
            ];

            let html = '';
            players.forEach(player => {
                const rankClass = player.rank <= 4 ? `rank-${player.rank}` : 'rank-other';
                html += `
                    <tr>
                        <td><span class="rank-badge ${rankClass}">${player.rank}</span></td>
                        <td><span class="player-name">${player.name}</span></td>
                        <td><strong>${player.points}</strong></td>
                        <td>${player.top1}</td>
                        <td>${player.exactScore}</td>
                        <td>${player.exactMinute}</td>
                    </tr>
                `;
            });

            if (tbody) tbody.innerHTML = html;
            if (preview) preview.innerHTML = `<table class="leaderboard-table"><tbody>${html}</tbody></table>`;
        }

        // Modal functions
        function openModal(match) {
            selectedMatch = match;
            isEditMode = !match.userPrediction;

            const modal = document.getElementById('predictionModal');
            const homeFlag = document.getElementById('modalHomeFlag');
            const awayFlag = document.getElementById('modalAwayFlag');
            const homeName = document.getElementById('modalHomeName');
            const awayName = document.getElementById('modalAwayName');

            // Check if teams exist in countries database
            if (!countries[match.home] || !countries[match.away]) {
                console.error(`Team not found in countries database: ${match.home} or ${match.away}`);
                alert('Lá»—i: KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘á»™i bÃ³ng. Vui lÃ²ng liÃªn há»‡ admin.');
                return;
            }

            homeFlag.innerHTML = countries[match.home].flag;
            homeFlag.style.background = countries[match.home].color;
            awayFlag.innerHTML = countries[match.away].flag;
            awayFlag.style.background = countries[match.away].color;
            homeName.textContent = match.home;
            awayName.textContent = match.away;

            const inputHome = document.getElementById('inputHomeScore');
            const inputAway = document.getElementById('inputAwayScore');
            const inputMinute = document.getElementById('inputMinute');
            const btnConfirm = document.getElementById('btnConfirm');
            const btnEdit = document.getElementById('btnEdit');
            const checkmark = document.getElementById('successCheckmark');
            const warning = document.getElementById('validationWarning');

            checkmark.classList.remove('show');
            warning.classList.remove('show');

            if (match.userPrediction) {
                inputHome.value = match.userPrediction.homeScore;
                inputAway.value = match.userPrediction.awayScore;
                inputMinute.value = match.userPrediction.minute;
                
                inputHome.disabled = true;
                inputAway.disabled = true;
                inputMinute.disabled = true;
                
                btnConfirm.style.display = 'none';
                btnEdit.style.display = 'block';
            } else {
                inputHome.value = 2;
                inputAway.value = 0;
                inputMinute.value = 45;
                
                inputHome.disabled = false;
                inputAway.disabled = false;
                inputMinute.disabled = false;
                
                btnConfirm.style.display = 'block';
                btnEdit.style.display = 'none';
            }

            // Add validation listeners
            const validateInputs = () => {
                const home = parseInt(inputHome.value) || 0;
                const away = parseInt(inputAway.value) || 0;
                const minute = parseInt(inputMinute.value) || 0;
                
                if (home === 0 && away === 0 && minute !== 0) {
                    warning.classList.add('show');
                } else {
                    warning.classList.remove('show');
                }
            };

            inputHome.addEventListener('input', validateInputs);
            inputAway.addEventListener('input', validateInputs);
            inputMinute.addEventListener('input', validateInputs);

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('predictionModal').classList.remove('active');
            selectedMatch = null;
        }

        function editPrediction() {
            const inputHome = document.getElementById('inputHomeScore');
            const inputAway = document.getElementById('inputAwayScore');
            const inputMinute = document.getElementById('inputMinute');
            const btnConfirm = document.getElementById('btnConfirm');
            const btnEdit = document.getElementById('btnEdit');

            inputHome.disabled = false;
            inputAway.disabled = false;
            inputMinute.disabled = false;

            btnConfirm.style.display = 'block';
            btnEdit.style.display = 'none';

            isEditMode = true;
        }

        function confirmPrediction() {
            const homeScore = parseInt(document.getElementById('inputHomeScore').value);
            const awayScore = parseInt(document.getElementById('inputAwayScore').value);
            const minute = parseInt(document.getElementById('inputMinute').value);

            // Validation
            if (isNaN(homeScore) || isNaN(awayScore) || isNaN(minute)) {
                alert('Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin!');
                return;
            }

            if (homeScore === 0 && awayScore === 0 && minute !== 0) {
                alert('Tá»‰ sá»‘ 0-0 thÃ¬ phÃºt ghi bÃ n pháº£i lÃ  0!');
                return;
            }

            if ((homeScore > 0 || awayScore > 0) && minute === 0) {
                alert('CÃ³ bÃ n tháº¯ng thÃ¬ phÃºt ghi bÃ n khÃ´ng thá»ƒ lÃ  0!');
                return;
            }

            // Save prediction
            selectedMatch.userPrediction = { homeScore, awayScore, minute };

            // Show success animation
            const checkmark = document.getElementById('successCheckmark');
            const actions = document.getElementById('modalActions');
            actions.style.display = 'none';
            checkmark.classList.add('show');

            // Close modal after animation
            setTimeout(() => {
                closeModal();
                actions.style.display = 'flex';
                renderUpcomingMatches();
                renderScheduleMatches();
                renderHistoryMatches();
            }, 1500);
        }

        // Page switching
        function switchPage(pageId) {
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(pageId).classList.add('active');
            
            // Update active tab
            const tabs = document.querySelectorAll('.nav-tab');
            if (pageId === 'homepage') {
                tabs[0].classList.add('active'); // Logo
            } else if (pageId === 'schedule') {
                tabs[1].classList.add('active'); // Lá»‹ch thi Ä‘áº¥u
            } else if (pageId === 'leaderboard') {
                tabs[2].classList.add('active'); // Báº£ng xáº¿p háº¡ng
            }

            if (pageId === 'schedule') {
                renderScheduleMatches();
            }
        }

        function scrollToPersonalStats() {
            switchPage('leaderboard');
            setTimeout(() => {
                document.getElementById('personalStatsSection').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        // Login Modal
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
        }

        function handleLogin(event) {
            event.preventDefault();
            
            const name = document.getElementById('loginName').value;
            const password = document.getElementById('loginPassword').value;
            const groupCode = document.getElementById('loginGroupCode').value;
            const remember = document.getElementById('rememberMe').checked;

            // TODO: Implement actual login logic
            console.log('Login attempt:', { name, password, groupCode, remember });
            
            alert(`ÄÄƒng nháº­p thÃ nh cÃ´ng!\nTÃªn: ${name}\nMÃ£ nhÃ³m: ${groupCode}`);
            closeLoginModal();
        }

        // Results Detail Modal
        function openResultsModal(match) {
            const modal = document.getElementById('resultsModal');
            
            // Check if teams exist in countries database
            if (!countries[match.home] || !countries[match.away]) {
                console.error(`Team not found in countries database: ${match.home} or ${match.away}`);
                alert('Lá»—i: KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘á»™i bÃ³ng. Vui lÃ²ng liÃªn há»‡ admin.');
                return;
            }
            
            // Set team info
            document.getElementById('resultsHomeFlag').innerHTML = countries[match.home].flag;
            document.getElementById('resultsHomeFlag').style.background = countries[match.home].color;
            document.getElementById('resultsAwayFlag').innerHTML = countries[match.away].flag;
            document.getElementById('resultsAwayFlag').style.background = countries[match.away].color;
            document.getElementById('resultsHomeName').textContent = match.home;
            document.getElementById('resultsAwayName').textContent = match.away;
            
            // Set scores
            document.getElementById('resultsHomeScore').textContent = match.actualScore.homeScore;
            document.getElementById('resultsAwayScore').textContent = match.actualScore.awayScore;
            document.getElementById('resultsMinute').textContent = `${match.actualScore.minute}'`;
            
            // Mock data - danh sÃ¡ch ngÆ°á»i chÆ¡i vá»›i predictions
            const playerPredictions = [
                { 
                    name: 'Na Bito', 
                    prediction: { homeScore: 2, awayScore: 0, minute: 84 },
                    timestamp: new Date('2026-01-15T19:00:00'),
                    isCurrentUser: true
                },
                { 
                    name: 'Tuá»‡', 
                    prediction: { homeScore: 2, awayScore: 1, minute: 84 },
                    timestamp: new Date('2026-01-15T19:05:00')
                },
                { 
                    name: 'NhÃ¢n', 
                    prediction: { homeScore: 2, awayScore: 1, minute: 70 },
                    timestamp: new Date('2026-01-15T19:10:00')
                },
                { 
                    name: 'NhÃ¢n', 
                    prediction: { homeScore: 1, awayScore: 1, minute: 30 },
                    timestamp: new Date('2026-01-15T19:15:00')
                },
                { 
                    name: 'NhÃ¢n', 
                    prediction: { homeScore: 1, awayScore: 3, minute: 90 },
                    timestamp: new Date('2026-01-15T19:20:00')
                },
                { 
                    name: 'Vy', 
                    prediction: { homeScore: 1, awayScore: 6, minute: 84 },
                    timestamp: new Date('2026-01-15T19:25:00')
                }
            ];

            // Calculate ranking based on game rules
            const actualHome = match.actualScore.homeScore;
            const actualAway = match.actualScore.awayScore;
            const actualMinute = match.actualScore.minute;

            playerPredictions.forEach(player => {
                const pred = player.prediction;
                
                // 1. Exact score
                player.isExactScore = (pred.homeScore === actualHome && pred.awayScore === actualAway);
                
                // 2. Goal difference error
                const predictedDiff = Math.abs(pred.homeScore - pred.awayScore);
                const actualDiff = Math.abs(actualHome - actualAway);
                player.goalDiffError = Math.abs(predictedDiff - actualDiff);
                
                // 3. Minute error
                player.minuteError = Math.abs(pred.minute - actualMinute);
            });

            // Sort by priority: exact score > goal diff error > minute error > timestamp
            playerPredictions.sort((a, b) => {
                if (a.isExactScore !== b.isExactScore) {
                    return b.isExactScore - a.isExactScore;
                }
                if (a.goalDiffError !== b.goalDiffError) {
                    return a.goalDiffError - b.goalDiffError;
                }
                if (a.minuteError !== b.minuteError) {
                    return a.minuteError - b.minuteError;
                }
                return a.timestamp - b.timestamp;
            });

            // Assign absolute rank (no ties) and points
            const rankPoints = [4, 3, 2, 1]; // Top 1-4
            playerPredictions.forEach((player, index) => {
                player.rank = index + 1;
                
                // Rank points
                player.rankPoint = (index < 4) ? rankPoints[index] : 0;
                
                // Exact score bonus
                player.exactScorePoint = player.isExactScore ? 5 : 0;
                
                // Minute bonus - find minimum error
                const minMinuteError = Math.min(...playerPredictions.map(p => p.minuteError));
                player.minutePoint = (player.minuteError === minMinuteError) ? 3 : 0;
                
                player.totalPoints = player.rankPoint + player.exactScorePoint + player.minutePoint;
            });

            // Render results list
            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = '';

            playerPredictions.forEach((player) => {
                const rankClass = player.rank <= 4 ? `rank-${player.rank}` : 'rank-other';
                const itemClass = player.isCurrentUser ? 'result-item current-user' : 'result-item';

                const item = document.createElement('div');
                item.className = itemClass;
                
                let pointsHTML = '';
                if (player.totalPoints > 0) {
                    if (player.rankPoint > 0) {
                        pointsHTML += `<span class="point-icon rank-point">â­+${player.rankPoint}</span>`;
                    }
                    if (player.exactScorePoint > 0) {
                        pointsHTML += `<span class="point-icon exact-score">ğŸ¯+${player.exactScorePoint}</span>`;
                    }
                    if (player.minutePoint > 0) {
                        pointsHTML += `<span class="point-icon minute-point">ğŸ•’+${player.minutePoint}</span>`;
                    }
                } else {
                    pointsHTML = `<span class="point-icon zero">+0</span>`;
                }

                item.innerHTML = `
                    <div class="result-rank ${rankClass}">${player.rank}</div>
                    <div class="result-player">
                        <div class="result-player-name">${player.name}</div>
                        <div class="result-prediction">${player.prediction.homeScore}-${player.prediction.awayScore} | ${player.prediction.minute}'</div>
                    </div>
                    <div class="result-points">
                        ${pointsHTML}
                    </div>
                `;

                resultsList.appendChild(item);
            });

            modal.classList.add('active');
        }

        function closeResultsModal() {
            document.getElementById('resultsModal').classList.remove('active');
        }

        // Favorite Team Modal Functions
        let tempSelectedTeam = null;

        function openFavoriteTeamModal() {
            const modal = document.getElementById('favoriteTeamModal');
            const deadlineText = document.getElementById('favoriteDeadlineText');
            const searchInput = document.getElementById('favoriteTeamSearch');
            
            // Show deadline
            deadlineText.textContent = favoriteTeamSettings.deadline.toLocaleString('vi-VN', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Clear search
            searchInput.value = '';
            tempSelectedTeam = favoriteTeamSettings.selectedTeam;
            
            // Render team list
            renderFavoriteTeamList();
            
            // Update selected display if already selected
            if (tempSelectedTeam) {
                updateFavoriteTeamSelected(tempSelectedTeam);
            }
            
            modal.classList.add('active');
        }

        function closeFavoriteTeamModal() {
            document.getElementById('favoriteTeamModal').classList.remove('active');
            document.getElementById('favoriteSuccessCheckmark').classList.remove('show');
            document.getElementById('favoriteTeamActions').style.display = 'flex';
            document.getElementById('favoriteTeamList').style.display = 'block';
            document.getElementById('favoriteTeamSearch').parentElement.style.display = 'block';
            tempSelectedTeam = null;
        }

        function renderFavoriteTeamList(filter = '') {
            const listContainer = document.getElementById('favoriteTeamList');
            listContainer.innerHTML = '';
            
            const teamNames = Object.keys(countries).filter(name => 
                filter === '' || name.toLowerCase().includes(filter.toLowerCase())
            );
            
            teamNames.forEach(teamName => {
                const teamData = countries[teamName];
                const item = document.createElement('div');
                item.style.cssText = `
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    padding: 12px;
                    cursor: pointer;
                    border-radius: 8px;
                    transition: background 0.2s;
                    border: 2px solid transparent;
                `;
                
                if (tempSelectedTeam === teamName) {
                    item.style.background = 'var(--yellow-bg)';
                    item.style.borderColor = '#F59E0B';
                }
                
                item.innerHTML = `
                    <div style="font-size: 32px;">${teamData.flag}</div>
                    <div style="flex: 1;">
                        <div style="font-size: 14px; font-weight: 600; color: var(--text-dark);">${teamName}</div>
                        <div style="font-size: 12px; color: var(--text-light);">Äiá»ƒm max: ${favoriteTeamSettings.points.champion}</div>
                    </div>
                `;
                
                item.onclick = () => selectTeam(teamName);
                
                item.onmouseenter = () => {
                    if (tempSelectedTeam !== teamName) {
                        item.style.background = 'var(--bg-gray)';
                    }
                };
                
                item.onmouseleave = () => {
                    if (tempSelectedTeam !== teamName) {
                        item.style.background = 'transparent';
                    }
                };
                
                listContainer.appendChild(item);
            });
        }

        function selectTeam(teamName) {
            tempSelectedTeam = teamName;
            renderFavoriteTeamList(document.getElementById('favoriteTeamSearch').value);
            updateFavoriteTeamSelected(teamName);
            document.getElementById('btnConfirmFavorite').disabled = false;
        }

        function updateFavoriteTeamSelected(teamName) {
            const selectedDiv = document.getElementById('favoriteTeamSelected');
            const teamData = countries[teamName];
            
            document.getElementById('selectedTeamFlag').textContent = teamData.flag;
            document.getElementById('selectedTeamName').textContent = teamName;
            document.getElementById('selectedTeamPoints').textContent = `Äiá»ƒm náº¿u vÃ´ Ä‘á»‹ch: ${favoriteTeamSettings.points.champion} Ä‘iá»ƒm`;
            
            selectedDiv.style.display = 'block';
        }

        function confirmFavoriteTeam() {
            if (!tempSelectedTeam) return;
            
            // Save selection
            favoriteTeamSettings.selectedTeam = tempSelectedTeam;
            favoriteTeamSettings.teamStatus = 'active'; // Äá»™i cÃ²n thi Ä‘áº¥u
            
            // Hide form, show success animation
            document.getElementById('favoriteTeamList').style.display = 'none';
            document.getElementById('favoriteTeamSearch').parentElement.style.display = 'none';
            document.getElementById('favoriteTeamActions').style.display = 'none';
            document.getElementById('favoriteTeamSelected').style.display = 'none';
            
            const checkmark = document.getElementById('favoriteSuccessCheckmark');
            checkmark.classList.add('show');
            
            // Close after animation
            setTimeout(() => {
                closeFavoriteTeamModal();
                renderScheduleMatches(); // Refresh card
                renderStats(); // Refresh stats
            }, 1500);
        }

        // Search handler
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('favoriteTeamSearch');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    renderFavoriteTeamList(this.value);
                });
            }
        });

        function renderStats() {
            const container = document.getElementById('statsFavoriteTeam');
            if (!container) return;
            
            if (!favoriteTeamSettings.selectedTeam) {
                container.innerHTML = '';
                return;
            }
            
            const teamData = countries[favoriteTeamSettings.selectedTeam];
            const status = favoriteTeamSettings.teamStatus;
            
            let statusText = '';
            let pointsLabel = '';
            let pointsValue = 0;
            
            if (status === 'champion') {
                statusText = 'ğŸ† VÃ´ Ä‘á»‹ch!';
                pointsLabel = 'Äiá»ƒm nháº­n Ä‘Æ°á»£c';
                pointsValue = favoriteTeamSettings.points.champion;
            } else if (status === 'eliminated' || status === 'round16' || status === 'quarter' || status === 'semi' || status === 'final') {
                // ÄÃ£ bá»‹ loáº¡i - hiá»‡n Ä‘iá»ƒm chÃ­nh xÃ¡c
                const points = getTeamPoints(status === 'eliminated' ? 'round16' : status);
                statusText = status === 'eliminated' ? 'âŒ ÄÃ£ bá»‹ loáº¡i' : `âœ“ ÄÃ£ Ä‘áº¡t ${getStatusName(status)}`;
                pointsLabel = 'Äiá»ƒm nháº­n Ä‘Æ°á»£c';
                pointsValue = points;
            } else {
                // CÃ²n thi Ä‘áº¥u - hiá»‡n Ä‘iá»ƒm tá»‘i thiá»ƒu
                statusText = 'âš½ Äang thi Ä‘áº¥u';
                pointsLabel = 'Äiá»ƒm tá»‘i thiá»ƒu';
                pointsValue = favoriteTeamSettings.points.round16; // Ãt nháº¥t cÅ©ng vÃ o vÃ²ng 16
            }
            
            container.innerHTML = `
                <div class="stats-favorite-team">
                    <div class="stats-favorite-team-header">
                        <div class="stats-favorite-team-icon">${teamData.flag}</div>
                        <div class="stats-favorite-team-info">
                            <div class="stats-favorite-team-name">${favoriteTeamSettings.selectedTeam}</div>
                            <div class="stats-favorite-team-status">${statusText}</div>
                        </div>
                    </div>
                    <div class="stats-favorite-team-points">
                        <div class="stats-favorite-team-points-label">${pointsLabel}</div>
                        <div class="stats-favorite-team-points-value">+${pointsValue}</div>
                    </div>
                </div>
            `;
        }

        function getStatusName(status) {
            const names = {
                'round16': 'VÃ²ng 16',
                'quarter': 'Tá»© káº¿t',
                'semi': 'BÃ¡n káº¿t',
                'final': 'Chung káº¿t'
            };
            return names[status] || status;
        }

        // Initialize - Start with Homepage
        document.addEventListener('DOMContentLoaded', function() {
            renderUpcomingMatches();
            renderScheduleMatches();
            renderHistoryMatches();
            renderLeaderboard();
            renderStats(); // Render favorite team stats
            
            // Set homepage as default
            switchPage('homepage');
        });
    </script>
</body>
</html>